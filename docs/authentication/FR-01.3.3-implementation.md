# FR-01.3.3: Authentication UI Components Implementation

This document provides details about the implementation of reusable authentication UI components for the M-Yallow frontend application.

## Overview

The authentication UI components provide a consistent and accessible way to integrate Clerk authentication into the application's user interface. These components are built on top of the existing shadcn/ui Button component and follow the application's design system.

## Components

### SignInButton

A button component that navigates to the sign-in page.

```tsx
import { SignInButton } from "@/components/auth";

// Basic usage
<SignInButton />

// With custom text
<SignInButton>Login</SignInButton>

// With custom styling
<SignInButton variant="outline" showIcon={false} />

// With custom redirect URL
<SignInButton redirectUrl="/custom-sign-in" />
```

#### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `redirectUrl` | `string` | `/sign-in` | The URL to navigate to when clicked |
| `showIcon` | `boolean` | `true` | Whether to show the sign-in icon |
| `children` | `React.ReactNode` | `"Sign In"` | The button text |
| `...buttonProps` | `ButtonProps` | - | All props from shadcn Button component |

### SignUpButton

A button component that navigates to the sign-up page.

```tsx
import { SignUpButton } from "@/components/auth";

// Basic usage
<SignUpButton />

// With custom text
<SignUpButton>Create Account</SignUpButton>

// With custom styling
<SignUpButton variant="secondary" />

// With custom redirect URL
<SignUpButton redirectUrl="/custom-sign-up" />
```

#### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `redirectUrl` | `string` | `/sign-up` | The URL to navigate to when clicked |
| `showIcon` | `boolean` | `true` | Whether to show the sign-up icon |
| `children` | `React.ReactNode` | `"Sign Up"` | The button text |
| `...buttonProps` | `ButtonProps` | - | All props from shadcn Button component |

### SignOutButton

A button component that signs the user out.

```tsx
import { SignOutButton } from "@/components/auth";

// Basic usage
<SignOutButton />

// With custom text
<SignOutButton>Logout</SignOutButton>

// With custom styling
<SignOutButton variant="ghost" showIcon={false} />

// With custom redirect URL after sign-out
<SignOutButton redirectUrl="/signed-out" />
```

#### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `redirectUrl` | `string` | `/` | The URL to navigate to after signing out |
| `showIcon` | `boolean` | `true` | Whether to show the sign-out icon |
| `children` | `React.ReactNode` | `"Sign Out"` | The button text |
| `...buttonProps` | `ButtonProps` | - | All props from shadcn Button component |

### UserProfileButton

A button component that navigates to the user profile page or displays a dropdown menu with user-related actions.

```tsx
import { UserProfileButton } from "@/components/auth";

// Basic usage
<UserProfileButton />

// With name display
<UserProfileButton showName />

// As a dropdown menu
<UserProfileButton displayMode="dropdown" />

// With custom styling
<UserProfileButton variant="outline" />

// With custom URLs
<UserProfileButton profileUrl="/my-profile" settingsUrl="/my-settings" />
```

#### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `profileUrl` | `string` | `/profile` | The URL to navigate to when clicked in button mode |
| `settingsUrl` | `string` | `/settings` | The URL to navigate to when clicking Settings in dropdown mode |
| `displayMode` | `"button" \| "dropdown"` | `"button"` | Whether to display as a simple button or a dropdown menu |
| `showName` | `boolean` | `false` | Whether to show the user's name (in button mode) |
| `...buttonProps` | `ButtonProps` | - | All props from shadcn Button component |

## Conditional Rendering

All authentication UI components conditionally render based on the user's authentication state:

- **SignInButton** and **SignUpButton** only render when the user is not signed in
- **SignOutButton** and **UserProfileButton** only render when the user is signed in

This behavior ensures that users only see relevant authentication actions based on their current state.

## Accessibility Features

The authentication UI components include several accessibility enhancements:

1. **ARIA Attributes**:
   - Loading states are communicated with `aria-busy`
   - Icon-only buttons include screen reader text via `sr-only`
   - Dropdown menus have proper ARIA roles and labels

2. **Keyboard Navigation**:
   - All buttons are natively keyboard accessible
   - Dropdown menus support keyboard navigation
   - Focus states are clearly visible

3. **Screen Reader Announcements**:
   - Authentication state changes are announced via the AuthStateAnnouncer component
   - Error states are announced when they occur

## Integration with Clerk

The components use Clerk's React hooks to access authentication state and user data:

- `useAuth()` - For checking if the user is signed in
- `useUser()` - For accessing user profile data
- `useClerk()` - For accessing the sign-out functionality

## Design System Integration

The components are built on top of the shadcn/ui components and follow the application's design system:

- Extend the existing Button component
- Use the Avatar component for user profile images
- Use the DropdownMenu component for dropdown menus
- Use Lucide icons for consistent iconography

## Usage Examples

### Basic Authentication Buttons

```tsx
import { 
  SignInButton, 
  SignUpButton, 
  SignOutButton, 
  UserProfileButton 
} from "@/components/auth";

export function AuthButtons() {
  return (
    <div className="flex gap-2">
      <SignInButton />
      <SignUpButton />
      <SignOutButton />
      <UserProfileButton />
    </div>
  );
}
```

### Customized Authentication Buttons

```tsx
import { 
  SignInButton, 
  SignUpButton, 
  SignOutButton, 
  UserProfileButton 
} from "@/components/auth";

export function CustomAuthButtons() {
  return (
    <div className="flex gap-2">
      <SignInButton variant="outline" showIcon={false}>
        Login
      </SignInButton>
      
      <SignUpButton variant="secondary">
        Create Account
      </SignUpButton>
      
      <SignOutButton variant="ghost" showIcon={false}>
        Logout
      </SignOutButton>
      
      <UserProfileButton displayMode="dropdown" />
    </div>
  );
}
```

### User Profile Button Variants

```tsx
import { UserProfileButton } from "@/components/auth";

export function ProfileButtons() {
  return (
    <div className="flex gap-4">
      {/* Simple button */}
      <UserProfileButton />
      
      {/* Button with name */}
      <UserProfileButton showName />
      
      {/* Dropdown menu */}
      <UserProfileButton displayMode="dropdown" />
      
      {/* Dropdown with custom styling */}
      <UserProfileButton displayMode="dropdown" variant="outline" />
    </div>
  );
}
```

## Testing

The authentication UI components should be tested for:

1. **Visual Rendering**:
   - Verify buttons render correctly in different states
   - Verify buttons adapt to different screen sizes
   - Verify buttons follow the design system

2. **Functional Behavior**:
   - Verify buttons trigger the correct authentication actions
   - Verify buttons show/hide based on authentication state
   - Verify buttons handle loading states correctly

3. **Accessibility**:
   - Verify buttons are keyboard navigable
   - Verify buttons have appropriate ARIA attributes
   - Verify screen reader announcements work correctly

## Related Documentation

- [Clerk Implementation](./clerk-implementation.md)
- [Authentication Accessibility](./accessibility.md)
- [Environment Variables](./environment-variables.md)
